<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="styles/styles.css">
        <link rel="preconnect" href="https://fonts.gstatic.com"> 
        <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Spicy+Rice&family=Caveat&family=Fira+Code:wght@300&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@200&display=swap" rel="stylesheet">
      </head>

      <body>
          <h1>Raw Blog Posts, y'all!</h1>
            
             <p id="blogsDiv"></p>

          <script>
                const urlToFetch = `https://kuefte6pgk.execute-api.us-east-2.amazonaws.com/dev`;
                    
                fetch(urlToFetch)
                    .then(function (response) {
                        const jsonResponse = response.json();
                        return jsonResponse; // Our Promise object
                    })
                    .then(function (data) {
                        // 'data' is an Object at this point...
                        const jsonArray = Object.entries(data);

                       // Print the value of the 'body' property of JSON object
                       for (const [key, value] of Object.entries(data)) {
                           if (key === "body"){
                            console.log('Found the body property...');
                            console.log('Here is the value of "body": ' + value);  // Prints out all the Blogs, but it's a String
                            // Convert the JSON String to an Object
                            const blogPostArray = JSON.parse(value);
                            console.log(Object.entries(blogPostArray));
                            // Now that the body is a JSO Object, lets print the key value pairs:
                            for (const [key, value] of Object.entries(blogPostArray)) { 
                                // console.log('In the value for loop');
                                // console.log(`${key}: ${value}`);
                                if (key === "Items"){
                                    console.log('Found the Items!')
                                }
                            }
                            
                            
                            
                           // console.log(blogPostArray); // This is an Array.  Yay!
                           // console.log(Object.entries(blogPostArray));
                            
                            

                            // Loop over the array and get each Blog post
                            for (var i = 0; i < blogPostArray.length; i++) {
                                console.log('We made it!');
                             }
                        }
                    }
                        appendData(data);
                    })
                    .catch(function (err) {
                        console.log('Something went wrong...: ' + err);
                    });

                function appendData(data) {
                    // Put the raw data into the blogsDiv...
                    document.getElementById("blogsDiv").innerHTML = data.body;

                }
          </script>
      </body>
</html>
